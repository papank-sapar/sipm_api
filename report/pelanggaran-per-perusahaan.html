<section class="content-header">
    <h1>&nbsp;</h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li>User</li>
        <li class="active">Input User</li>
    </ol>
</section>
<section class="content">
    <div class="box box-info">
        <div class="box-header with-border">
            <h3 class="box-title">Pelanggaran Per Perusahaan</h3>
        </div>
        <div class="box-body">
            <input type="" ng-model="filterData.kodePerusahaan" name="" placeholder="Kode Perusahaan"><br>
            <input type="" ng-model="filterData.perusahaan" name="" placeholder="Perusahaan"><br>
            <input type="" ng-model="filterData.awalPeriode" name="" placeholder="Awal Periode"><br>
            <input type="" ng-model="filterData.akhirPeriode" name="" placeholder="Akhir Periode"><br>
            <input type="" ng-model="filterData.PIC" name="" placeholder="PIC"><br>
            <button class="btn btn-primary btn-sm" ng-click="fetch()">Get Data</button>
            <h3>Daftar Perusahaan yang memiliki Pelanggaran</h3>
            <table class="table table-bordered table-striped">
                <thead>
                    <th>No</th>
                    <th>Perusahaan</th>
                </thead>
                <tbody>
                    <tr ng-repeat="perusahaan in perusahaanList">
                        <td>{{$index + 1}}</td>
                        <td>{{perusahaan}}</td>
                    </tr>
                </tbody>
            </table>
            <br>
            <table class="table table-bordered">
                <thead>
                    <th>No</th>
                    <th>Perusahaan</th>
                    <th>Pelanggaran</th>
                    <th>Jumlah</th>
                </thead>
                <tbody>
                    <tr ng-repeat-start="temuanByPerusahaan in temuanByPerusahaanList">
                        <td rowspan="{{temuanByPerusahaan.pelanggaran.length}}">{{$index + 1}}</td>
                        <td rowspan="{{temuanByPerusahaan.pelanggaran.length}}">{{temuanByPerusahaan.perusahaan}}</td>
                        <td>{{temuanByPerusahaan.pelanggaran[0].tracking_peraturan}}</td>
                        <td>{{temuanByPerusahaan.pelanggaran[0].jumlah}}</td>
                    </tr>
                    <tr ng-repeat-end ng-repeat="pelanggaran in temuanByPerusahaan.pelanggaran" ng-if="!$first">
                        <td>{{pelanggaran.tracking_peraturan}}</td>
                        <td>{{pelanggaran.jumlah}}</td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>
</section>
